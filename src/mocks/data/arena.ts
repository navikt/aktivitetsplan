import moment from 'moment';
import { RestRequest } from 'msw';

import { ArenaAktivitet } from '../../datatypes/arenaAktivitetTypes';
import { Forhaandsorientering } from '../../datatypes/forhaandsorienteringTypes';
import { visArenaAktiviteter } from '../demo/sessionstorage';

export const arena = !visArenaAktiviteter()
    ? []
    : ([
          {
              id: 'ARENATA11',
              status: 'GJENNOMFORES',
              type: 'TILTAKSAKTIVITET',
              tittel: 'Klatrekurs i seil',
              beskrivelse: 'Sjørøvere trenger å kunne klatre i seil',
              fraDato: '2017-07-01T00:00:00+02:00',
              tilDato: '2025-12-31T00:00:00+01:00',
              opprettetDato: '2018-09-02T00:00:00+02:00',
              avtalt: true,
              deltakelseProsent: 95.6,
              tiltaksnavn: 'Trening123',
              tiltakLokaltNavn: 'NAV OSLO',
              arrangoer: 'Pelle',
              bedriftsnummer: '123456789',
              antallDagerPerUke: 5.0,
              statusSistEndret: '2017-07-02T00:00:00+02:00',
              etikett: null,
              moeteplanListe: null,
          },
          {
              id: 'ARENATA12',
              status: 'GJENNOMFORES',
              type: 'TILTAKSAKTIVITET',
              tittel: 'Ny arenaaktivitet',
              beskrivelse: 'Sjørøvere trenger å kunne klatre i seil',
              fraDato: '2022-03-02T00:00:00+02:00',
              tilDato: '2025-12-31T00:00:00+01:00',
              opprettetDato: '2021-09-02T00:00:00+02:00',
              avtalt: true,
              deltakelseProsent: 95.6,
              tiltaksnavn: 'Trening123',
              tiltakLokaltNavn: 'NAV OSLO',
              arrangoer: 'Pelle',
              bedriftsnummer: '123456789',
              antallDagerPerUke: 5.0,
              statusSistEndret: '2017-07-02T00:00:00+02:00',
              etikett: null,
              moeteplanListe: null,
          },
          {
              id: 'ARENATA22',
              status: 'AVBRUTT',
              type: 'TILTAKSAKTIVITET',
              tittel: 'Seiling',
              beskrivelse: 'Sjårøvere trenger å kunne seile',
              fraDato: '2017-02-16T00:00:00+01:00',
              tilDato: '2017-06-30T00:00:00+02:00',
              opprettetDato: '2017-06-30T00:00:00+02:00',
              avtalt: true,
              deltakelseProsent: 30.0,
              tiltaksnavn: 'Trening123',
              tiltakLokaltNavn: 'NAV OSLO',
              arrangoer: 'Pelle',
              bedriftsnummer: '123456789',
              antallDagerPerUke: 1.5,
              statusSistEndret: '2017-06-30T00:00:00+02:00',
              etikett: null,
              moeteplanListe: null,
          },
          {
              id: 'ARENATA33',
              status: 'GJENNOMFORES',
              type: 'TILTAKSAKTIVITET',
              tittel: 'Seiling på hav',
              beskrivelse: 'Sjårøvere trenger å kunne seile på hav',
              fraDato: '2017-02-16T00:00:00+01:00',
              tilDato: '2025-12-31T00:00:00+01:00',
              opprettetDato: '2018-09-02T00:00:00+02:00',
              avtalt: true,
              deltakelseProsent: 30.0,
              tiltaksnavn: 'Trening123',
              tiltakLokaltNavn: 'NAV OSLO',
              arrangoer: 'Pelle',
              bedriftsnummer: '123456789',
              antallDagerPerUke: 1.5,
              statusSistEndret: '2017-06-30T00:00:00+02:00',
              etikett: null,
              moeteplanListe: null,
              forhaandsorientering: {
                  tekst: 'Det er viktig at du gjennomfører denne aktiviteten med NAV. Gjør du ikke det, kan det medføre at stønaden du mottar fra NAV bortfaller for en periode eller stanses. Hvis du ikke kan gjennomføre aktiviteten, ber vi deg ta kontakt med veilederen din så snart som mulig.',
                  type: 'SEND_FORHAANDSORIENTERING',
              },
          },
          {
              id: 'ARENAGA120719688',
              status: 'FULLFORT',
              type: 'GRUPPEAKTIVITET',
              tittel: 'Informasjonsmøte om arbeidsavklaringspenger',
              beskrivelse: 'test',
              fraDato: '2018-02-22T13:00:00+01:00',
              tilDato: '2018-02-22T00:00:00+01:00',
              opprettetDato: '2018-02-22T13:00:00+01:00',
              avtalt: true,
              etikett: null,
              deltakelseProsent: null,
              tiltaksnavn: null,
              tiltakLokaltNavn: null,
              arrangoer: null,
              bedriftsnummer: null,
              antallDagerPerUke: null,
              statusSistEndret: null,
              moeteplanListe: [
                  {
                      startDato: '2018-02-22T13:00:00+01:00',
                      sluttDato: '2018-02-22T00:00:00+01:00',
                      sted: 'NAV Frogner, Sommerrogata 1 (v/Solli Plass), 0255 Oslo',
                  },
              ],
          },
          {
              id: 'ARENATA5316644',
              status: 'GJENNOMFORES',
              type: 'TILTAKSAKTIVITET',
              tittel: 'AMO-kurs: Endringsarbeid med fokus på kompetanseheving for deltagelse i arbeidslivet',
              beskrivelse: null,
              fraDato: '2016-08-28T22:00:00.000+00:00',
              tilDato: '2016-09-11T22:00:00.000+00:00',
              opprettetDato: '2016-09-11T22:00:00.000+00:00',
              avtalt: true,
              forhaandsorientering: null,
              etikett: null,
              deltakelseProsent: 100,
              tiltaksnavn: 'Arbeidsmarkedsopplæring (AMO)',
              tiltakLokaltNavn: 'Endringsarbeid med fokus på kompetanseheving for deltagelse i arbeidslivet',
              arrangoer: 'PODIUM AS',
              bedriftsnummer: '916068670',
              antallDagerPerUke: null,
              statusSistEndret: '2016-09-11T22:00:00.000+00:00',
              moeteplanListe: null,
          },
          {
              id: 'ARENATA3930143',
              status: 'GJENNOMFORES',
              type: 'TILTAKSAKTIVITET',
              tittel: 'Jobbklubb',
              beskrivelse: 'Karriereveiledning høyere utdanning i Oslo for Akershus',
              fraDato: '2011-08-21T22:00:00.000+00:00',
              tilDato: '2011-09-15T22:00:00.000+00:00',
              opprettetDato: '2011-08-31T22:00:00.000+00:00',
              avtalt: true,
              forhaandsorientering: null,
              etikett: 'IKKEM',
              deltakelseProsent: 100,
              tiltaksnavn: 'Jobbklubb',
              tiltakLokaltNavn: 'Karriereveiledning høyere utdanning i Oslo for Akershus',
              arrangoer: 'Joblearn AS',
              bedriftsnummer: '981669649',
              antallDagerPerUke: null,
              statusSistEndret: '2011-08-31T22:00:00.000+00:00',
              moeteplanListe: null,
          },
          {
              id: 'ARENATA3852010',
              status: 'GJENNOMFORES',
              type: 'TILTAKSAKTIVITET',
              tittel: 'Jobbklubb',
              beskrivelse: 'Karriereveiledning (Jobbklubb) i Oslo for Akershus',
              fraDato: '2011-03-13T23:00:00.000+00:00',
              tilDato: '2011-03-28T22:00:00.000+00:00',
              opprettetDato: '2011-04-07T22:00:00.000+00:00',
              avtalt: true,
              forhaandsorientering: null,
              etikett: null,
              deltakelseProsent: 100,
              tiltaksnavn: 'Jobbklubb',
              tiltakLokaltNavn: 'Karriereveiledning (Jobbklubb) i Oslo for Akershus',
              arrangoer: 'Joblearn AS',
              bedriftsnummer: '981669649',
              antallDagerPerUke: null,
              statusSistEndret: '2011-04-07T22:00:00.000+00:00',
              moeteplanListe: null,
          },
          {
              id: 'ARENATA3820997',
              status: 'FULLFORT',
              type: 'TILTAKSAKTIVITET',
              tittel: 'Jobbklubb',
              beskrivelse: 'Karriereveiledning (Jobbklubb) høyere utdanning Asker/Bærum',
              fraDato: '2011-02-13T23:00:00.000+00:00',
              tilDato: '2011-03-10T23:00:00.000+00:00',
              opprettetDato: '2011-03-13T23:00:00.000+00:00',
              avtalt: true,
              forhaandsorientering: null,
              etikett: null,
              deltakelseProsent: 100,
              tiltaksnavn: 'Jobbklubb',
              tiltakLokaltNavn: 'Karriereveiledning (Jobbklubb) høyere utdanning Asker/Bærum',
              arrangoer: 'Joblearn AS',
              bedriftsnummer: '981669649',
              antallDagerPerUke: null,
              statusSistEndret: '2011-03-13T23:00:00.000+00:00',
              moeteplanListe: null,
          },
          {
              id: 'ARENATA3471197',
              status: 'AVBRUTT',
              type: 'TILTAKSAKTIVITET',
              tittel: 'Jobbklubb',
              beskrivelse: 'Jobbklubb Asker/Bærum (Akershus)',
              fraDato: '2020-05-31T10:46:51.622+01:00',
              tilDato: '2020-06-31T10:46:51.622+01:00',
              opprettetDato: '2020-05-31T10:46:51.622+01:00',
              avtalt: true,
              forhaandsorientering: null,
              etikett: 'NEITAKK',
              deltakelseProsent: 100,
              tiltaksnavn: 'Jobbklubb',
              tiltakLokaltNavn: 'Jobbklubb Asker/Bærum (Akershus)',
              arrangoer: 'Joblearn AS',
              bedriftsnummer: '981669649',
              antallDagerPerUke: null,
              statusSistEndret: '2020-05-31T10:46:51.622+01:00',
              moeteplanListe: null,
          },
          {
              id: 'ARENATA1357086',
              status: 'FULLFORT',
              type: 'TILTAKSAKTIVITET',
              tittel: 'Jobbklubb',
              beskrivelse: 'Jobbklubb Bærum/ Asker',
              fraDato: '2008-03-04T23:00:00.000+00:00',
              tilDato: '2008-04-03T22:00:00.000+00:00',
              opprettetDato: '2008-04-04T22:00:00.000+00:00',
              avtalt: true,
              forhaandsorientering: null,
              etikett: null,
              deltakelseProsent: 100,
              tiltaksnavn: 'Jobbklubb',
              tiltakLokaltNavn: 'Jobbklubb Bærum/ Asker',
              arrangoer: 'Joblearn AS',
              bedriftsnummer: '981669649',
              antallDagerPerUke: null,
              statusSistEndret: '2008-04-04T22:00:00.000+00:00',
              moeteplanListe: null,
          },
          {
              id: 'ARENATA1337317',
              status: 'AVBRUTT',
              type: 'TILTAKSAKTIVITET',
              tittel: 'AMO-kurs: Bussertifikat - Kl. D (Akershus)',
              beskrivelse: null,
              fraDato: '2021-05-31T10:46:51.622+01:00',
              tilDato: '2021-07-31T10:46:51.622+01:00',
              opprettetDato: '2020-05-31T10:46:51.622+01:00',
              avtalt: true,
              forhaandsorientering: null,
              etikett: 'AVSLAG',
              deltakelseProsent: 100,
              tiltaksnavn: 'Arbeidsmarkedsopplæring (AMO)',
              tiltakLokaltNavn: 'Bussertifikat - Kl. D (Akershus)',
              arrangoer: 'WRIGHT TRAFIKKSKOLE AS',
              bedriftsnummer: '973410997',
              antallDagerPerUke: null,
              statusSistEndret: '2021-07-31T10:46:51.622+01:00',
              moeteplanListe: null,
          },
          {
              id: 'ARENATA4046316',
              status: 'AVBRUTT',
              type: 'TILTAKSAKTIVITET',
              tittel: 'AMO-kurs: Arbeidsforberedende kurs avklaring og motivasjon Asker/Bærum',
              beskrivelse: null,
              fraDato: null,
              tilDato: '2011-11-27T23:00:00.000+00:00',
              opprettetDato: '2012-06-25T22:00:00.000+00:00',
              avtalt: true,
              forhaandsorientering: null,
              etikett: 'IKKAKTUELL',
              deltakelseProsent: 100,
              tiltaksnavn: 'Arbeidsmarkedsopplæring (AMO)',
              tiltakLokaltNavn: 'Arbeidsforberedende kurs avklaring og motivasjon Asker/Bærum',
              arrangoer: 'Joblearn AS',
              bedriftsnummer: '981669649',
              antallDagerPerUke: null,
              statusSistEndret: '2012-06-25T22:00:00.000+00:00',
              moeteplanListe: null,
          },
      ] as unknown as ArenaAktivitet[]);

export const oppdaterArenaaktivitet = async (req: RestRequest) => {
    const arenaaktivitetId = req.url.searchParams.get('arenaaktivitetId');
    const body = await req.json();

    const aktivitet = arena.find((arenaaktivitet) => arenaaktivitet.id === arenaaktivitetId) as ArenaAktivitet;

    aktivitet.forhaandsorientering = {
        type: body.forhaandsorientering.type,
        tekst: body.forhaandsorientering.tekst,
    };

    return aktivitet;
};

export const oppdaterLestFhoArenaaktivitet = (req: RestRequest) => {
    const aktivitetId = req.url.searchParams.get('aktivitetId');

    const lestAktivitet = arena.find((arenaaktivitet) => arenaaktivitet.id === aktivitetId) as ArenaAktivitet;

    lestAktivitet.forhaandsorientering = {
        ...(lestAktivitet.forhaandsorientering as Forhaandsorientering),
        lestDato: moment().toISOString(),
    };

    return lestAktivitet;
};

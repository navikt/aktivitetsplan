# ref https://raw.githubusercontent.com/nais/naisd/master/nais_example.yaml
image: docker.adeo.no:5000/fo/aktivitetsplan
replicas:
  min: 2
  max: 4
  cpuThresholdPercentage: 50
port: 8080
healthcheck:
  liveness:
    path: aktivitetsplan/internal/isAlive
    initialDelay: 60
  readiness:
    path: aktivitetsplan/internal/isReady
    initialDelay: 60
prometheus:
  enabled: true
  path: aktivitetsplan/internal/metrics
fasitResources:
  used:

  - alias: loadbalancer:aktivitetsplan
    resourceType: loadbalancerconfig

  - alias: appres.cms
    resourceType: baseurl

  - alias: aktivitetsplan.onboarding.video
    resourceType: baseurl
    propertyMap:
      url: PUBLIC_ONBOARDING_VIDEO_URL

  - alias: veilarbaktivitetproxyAPI
    resourceType: restservice
    propertyMap:
      url: PUBLIC_VEILARBAKTIVITET_URL

  - alias: veilarbdialogproxyAPI
    resourceType: restservice
    propertyMap:
      url: PUBLIC_VEILARBDIALOG_URL

  - alias: feature_endpoint_sbs
    resourceType: restservice
    propertyMap:
      url: PUBLIC_FEATURE_ENDPOINT_URL

  - alias: appdynamics
    resourceType: applicationproperties

  # oidc med AzureAD B2C
  - alias: aad_b2c_clientid
    resourceType: credential
  - alias: aad_b2c_discovery
    resourceType: baseurl

  - alias: veilarbstepup_oidc
    resourceType: baseurl

team: oppfolging
resources:
  limits:
    cpu: 3
    memory: 768Mi
  requests:
    cpu: 200m
    memory: 512Mi

webproxy: true
alertProfiles:
  - common-java-modules

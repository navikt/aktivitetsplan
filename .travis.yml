cache: npm

jobs:
    include:
    - stage: setup
      language: node_js
      node_js: "8"
      before_install:
      - export TZ=Europe/Oslo

    - &tests
      stage: tests

    - <<: *tests
      name: "lint"
      script:
      - npm run lint

    - <<: *tests
      name: "unit test"
      script:
      - npm run test

    - <<: *tests
      name: "browserstack"
      script:
      - "npm run heroku-postbuild"
      - "npm-run-all -p -r start test:browserstack"

language: node_js
node_js: "8"
cache: npm
before_install:
    - export TZ=Europe/Oslo

jobs:
    include:
    - stage: setup

    - &tests
      stage: tests

    - <<: *tests
      name: "lint"
      script:
      - npm run lint

    - <<: *tests
      name: "unit test"
      script:
      - npm run test

    - <<: *tests
      name: "browserstack"
      script:
      - "npm run heroku-postbuild"
      - "npm-run-all -p -r start test:browserstack"

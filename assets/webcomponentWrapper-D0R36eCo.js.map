{"version":3,"file":"webcomponentWrapper-D0R36eCo.js","sources":["../../src/webcomponentWrapper.tsx"],"sourcesContent":["import dsStyles from '@navikt/ds-css/dist/index.css?inline';\nimport React from 'react';\n\nimport App from './app';\nimport lessCss from './index.less?inline';\nimport { LocalStorageElement, settSessionStorage } from './mocks/demo/localStorage';\nimport modulesCss from './moduler/aktivitet/aktivitet-kort/Aktivitetskort.module.less?inline';\nimport Provider from './Provider';\nimport tailwindCss from './tailwind.css?inline';\nimport pdfCssAnnotationCss from 'react-pdf/dist/Page/AnnotationLayer.css?inline';\nimport pdfCssTextCss from 'react-pdf/dist/Page/TextLayer.css?inline';\nimport { createRoot, Root } from 'react-dom/client';\nimport {\n    clearReduxCache,\n    getPreloadedStateFromSessionStorage,\n    RootState,\n    saveReduxStateToSessionStorage,\n} from './store';\nimport { createRouterWithWrapper } from './routing/routerConfig';\n\n// Clear redux-cache from session storage on page load to make sure new data is fetched\n// Cache is only supposed to be used when \"jumping\" between apps in veilarbpersonflate\nclearReduxCache();\n\nexport class DabAktivitetsplan extends HTMLElement {\n    setFnr?: (fnr: string) => void;\n    root: Root | undefined;\n\n    disconnectedCallback() {\n        saveReduxStateToSessionStorage();\n        this.root?.unmount();\n    }\n\n    connectedCallback() {\n        // This will be app entry point, need to be outside modal-mount node\n        const appRoot = document.createElement('div');\n        appRoot.id = 'aktivitetsplan-root';\n        const shadowRoot = this.attachShadow({ mode: 'closed' });\n        shadowRoot.appendChild(appRoot);\n\n        // Load styles under this shadowDom-node, not root element\n        const styleElem = document.createElement('style');\n        styleElem.innerHTML = dsStyles + tailwindCss + lessCss + modulesCss + pdfCssAnnotationCss + pdfCssTextCss;\n        shadowRoot.appendChild(styleElem);\n\n        const fnr = this.getAttribute('data-fnr') ?? undefined;\n        const aktivEnhet = this.getAttribute('data-aktivEnhet') ?? undefined;\n        let preloadedState: RootState | undefined = undefined;\n        if (fnr) {\n            settSessionStorage(LocalStorageElement.FNR, fnr);\n            preloadedState = getPreloadedStateFromSessionStorage(fnr);\n        }\n        this.root = createRoot(appRoot);\n        this.root.render(\n            <Provider\n                preloadedState={preloadedState}\n                key={fnr}\n                fnr={fnr}\n                setFnrRef={(setFnr) => (this.setFnr = setFnr)}\n                aktivEnhet={aktivEnhet}\n            >\n                <App createRoutesForUser={createRouterWithWrapper()} key={'1'} />\n            </Provider>,\n        );\n    }\n\n    attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n        if (name === 'data-fnr' && this.setFnr) {\n            settSessionStorage(LocalStorageElement.FNR, newValue);\n            this.setFnr(newValue);\n        }\n    }\n\n    static get observedAttributes() {\n        return ['data-fnr', 'data-aktivEnhet'];\n    }\n}\n"],"names":["clearReduxCache","DabAktivitetsplan","__publicField","saveReduxStateToSessionStorage","_a","appRoot","shadowRoot","styleElem","dsStyles","tailwindCss","lessCss","modulesCss","pdfCssAnnotationCss","pdfCssTextCss","fnr","aktivEnhet","preloadedState","settSessionStorage","LocalStorageElement","getPreloadedStateFromSessionStorage","createRoot","jsx","Provider","setFnr","App","createRouterWithWrapper","name","oldValue","newValue"],"mappings":"u5sRAsBAA,EAAgB,EAET,MAAMC,UAA0B,WAAY,CAA5C,kCACHC,EAAA,eACAA,EAAA,aAEA,sBAAuB,OACYC,EAAA,GAC/BC,EAAA,KAAK,OAAL,MAAAA,EAAW,SAAQ,CAGvB,mBAAoB,CAEV,MAAAC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,GAAK,sBACb,MAAMC,EAAa,KAAK,aAAa,CAAE,KAAM,SAAU,EACvDA,EAAW,YAAYD,CAAO,EAGxB,MAAAE,EAAY,SAAS,cAAc,OAAO,EAChDA,EAAU,UAAYC,EAAWC,EAAcC,EAAUC,EAAaC,EAAsBC,EAC5FP,EAAW,YAAYC,CAAS,EAEhC,MAAMO,EAAM,KAAK,aAAa,UAAU,GAAK,OACvCC,EAAa,KAAK,aAAa,iBAAiB,GAAK,OAC3D,IAAIC,EACAF,IACmBG,EAAAC,EAAoB,IAAKJ,CAAG,EAC/CE,EAAiBG,EAAoCL,CAAG,GAEvD,KAAA,KAAOM,aAAWf,CAAO,EAC9B,KAAK,KAAK,OACNgB,EAAA,IAACC,EAAA,CACG,eAAAN,EAEA,IAAAF,EACA,UAAYS,GAAY,KAAK,OAASA,EACtC,WAAAR,EAEA,SAACM,EAAA,IAAAG,EAAA,CAAI,oBAAqBC,KAAgC,GAAK,CAAA,EAL1DX,CAAA,CAOb,CAAA,CAGJ,yBAAyBY,EAAcC,EAAkBC,EAAkB,CACnEF,IAAS,YAAc,KAAK,SACTT,EAAAC,EAAoB,IAAKU,CAAQ,EACpD,KAAK,OAAOA,CAAQ,EACxB,CAGJ,WAAW,oBAAqB,CACrB,MAAA,CAAC,WAAY,iBAAiB,CAAA,CAE7C"}